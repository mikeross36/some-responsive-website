class UI{constructor(){this.budgetInput=document.querySelector("#budget-input"),this.budgetFeedback=document.querySelector("#budget-feedback"),this.budgetAmount=document.querySelector("#budget-amount"),this.expenseAmount=document.querySelector("#expense-amount"),this.balanceAmount=document.querySelector("#balance-amount"),this.balance=document.querySelector("#balance"),this.expenseInput=document.querySelector("#expense-input"),this.amountInput=document.querySelector("#amount-input"),this.expenseFeedback=document.querySelector("#expense-feedback"),this.expenseList=document.querySelector("#expense-list"),this.expItemArr=[],this.expItemId=0}submitBudgetForm(){const e=this.budgetInput.value;""===e||e<0?(this.budgetFeedback.classList.add("showItem"),this.budgetFeedback.innerHTML="<p>value cannot be empty or negative!</p>",setTimeout((()=>{this.budgetFeedback.classList.remove("showItem")}),3e3)):(this.budgetAmount.textContent=e,this.budgetInput.value="",this.showBalance())}showBalance(){const e=this.totalExpense(),t=parseInt(this.budgetAmount.textContent)-e;this.balanceAmount.textContent=t,t<0?(this.balance.classList.remove("showGreen","showBlack"),this.balance.classList.add("showRed")):t>0?(this.balance.classList.remove("showRed","showBlack"),this.balance.classList.add("showGreen")):0===t&&(this.balance.classList.remove("showGreen","showRed"),this.balance.classList.add("showBlack"))}totalExpense(){let e=0;return this.expItemArr.length>0&&(e=this.expItemArr.reduce(((e,t)=>e+=t.amount),0)),this.expenseAmount.textContent=e,e}submitExpenseForm(){const e=this.expenseInput.value,t=this.amountInput.value;if(!e||!t||t<0)this.expenseFeedback.classList.add("showItem"),this.expenseFeedback.innerHTML="<p>value cannot be empty or negative !</p>",setTimeout((()=>{this.expenseFeedback.classList.remove("showItem")}),3e3);else{let s=parseInt(t);this.expenseInput.value="",this.amountInput.value="";let r={id:this.expItemId,title:e,amount:s};this.expItemId++,this.expItemArr.push(r),this.addExpense(r),this.showBalance()}}addExpense(e){const t=document.createElement("div");t.classList.add("expense"),t.innerHTML=`\n    <div class="expense-item">\n      <h4 class="expense-title list-item">${e.title}</h4>\n      <h4 class="expense-amount list-item">${e.amount} â‚¬</h4>\n      <div class="expense-icons list-item">\n        <a href="#budget-form" class="edit-icon" data-id=${e.id}>\n          <i class="fas fa-edit"></i>\n        </a>\n        <a href="#budget-form" class="delete-icon" data-id=${e.id}>\n          <i class="fas fa-trash"></i>\n        </a>\n      </div>\n    </div>`,this.expenseList.appendChild(t)}editExpense(e){let t=parseInt(e.dataset.id),s=e.parentElement.parentElement.parentElement;this.expenseList.removeChild(s);let r=this.expItemArr.filter((e=>e.id===t));this.expenseInput.value=r[0].title,this.amountInput.value=r[0].amount;let n=this.expItemArr.filter((e=>e.id!==t));this.expItemArr=n,this.showBalance()}deleteExpense(e){let t=parseInt(e.dataset.id),s=e.parentElement.parentElement.parentElement;this.expenseList.removeChild(s);let r=this.expItemArr.filter((e=>e.id!==t));this.expItemArr=r,this.showBalance()}}eventListeners=()=>{const e=document.querySelector("#budget-form"),t=document.querySelector("#expense-form"),s=document.querySelector("#expense-list"),r=new UI;e.addEventListener("submit",(e=>{e.preventDefault(),r.submitBudgetForm()})),t.addEventListener("submit",(e=>{e.preventDefault(),r.submitExpenseForm()})),s.addEventListener("click",(e=>{e.target.parentElement.classList.contains("edit-icon")?r.editExpense(e.target.parentElement):e.target.parentElement.classList.contains("delete-icon")&&r.deleteExpense(e.target.parentElement)}))},document.addEventListener("DOMContentLoaded",(()=>{eventListeners()})),setInterval((()=>{const e=new Date;let t=e.getHours(),s=e.getMinutes(),r=e.getSeconds(),n="AM";t>=12&&(n="PM"),t>12&&(t-=12),s<10&&(s="0"+s),r<10&&(r="0"+r);const a=`${t} : ${s} : ${r} ${n}`,o=document.querySelector(".header-clock"),i=document.querySelector(".footer-clock");o.innerHTML=a,i.innerHTML=a})),$(document).ready((()=>{$(".mobile-links a").click((function(e){e.preventDefault();let t=$(this).attr("href");$("html, body").stop().animate({scrollTop:$(t).offset().top},2e3)}))}));const menuBtn=document.querySelector(".menu-btn"),searchForm=document.querySelector(".search-form"),mobileMenu=document.querySelector(".has-fade"),btnClick="click";let showMenu=!1;menuBtn.addEventListener("click",(()=>{showMenu?(menuBtn.classList.remove("open"),searchForm.classList.remove("close"),mobileMenu.classList.add("fade-out"),mobileMenu.classList.remove("fade-in"),showMenu=!1):(menuBtn.classList.add("open"),searchForm.classList.add("close"),mobileMenu.classList.add("fade-in"),mobileMenu.classList.remove("fade-out"),showMenu=!0)}));class Products{async getProducts(){try{const e=await fetch("products.json");if(e.ok){let t=(await e.json()).items;return t=t.map((e=>{const{title:t,price:s}=e.fields,{id:r}=e.sys;return{title:t,price:s,id:r,image:e.fields.image.fields.file.url}})),t}}catch{alert("Error!")}}}class SUI{constructor(){this.productsCenter=document.querySelector("#products-center"),this.bagBtnsArr=[],this.cartItemsArr=[],this.cartItems=document.querySelector("#cart-items"),this.cartTotal=document.querySelector("#cart-total"),this.cartContent=document.querySelector("#cart-content"),this.cartOverlay=document.querySelector("#cart-overlay"),this.cartItself=document.querySelector("#cart"),this.openCartBtn=document.querySelector("#cart-btn"),this.closeCartBtn=document.querySelector("#close-cart"),this.clearCartBtn=document.querySelector("#clear-cart")}displayProducts=e=>{let t="";e.forEach((e=>{t+=`\n            <article>\n                <div class="img-container">\n                    <img src=${e.image} alt="product img" class="product-img"/>\n                    <a href="#cart-overlay" class="bag-btn" id="bag-btn" data-id=${e.id}>\n                        <i class="fas fa-shopping-cart"></i>\n                        add to cart\n                    </a>\n                </div>\n                <h4>${e.title}</h4>\n                <h4>${e.price}</h4>\n            </article>\n            `})),this.productsCenter.innerHTML=t};getBagBtns=()=>{const e=[...document.querySelectorAll("#bag-btn")];this.bagBtnsArr=e,e.forEach((e=>{let t=e.dataset.id;this.cartItemsArr.find((e=>e.id===t))&&(e.innerText="in cart",e.style.textTransform="uppercase",e.disabled=!0,e.style.cursor="not-allowed"),e.addEventListener("click",(e=>{e.target.innerText="in cart",e.target.style.textTransform="uppercase",e.target.disabled=!0,e.target.style.cursor="not-allowed";const s={...Storage.getProduct(t),amount:1};this.cartItemsArr=[...this.cartItemsArr,s],Storage.setCart(this.cartItemsArr),this.setCartValues(this.cartItemsArr),this.addItemToCart(s),this.showCart()}))}))};setCartValues=e=>{let t=0,s=0;e.map((e=>{t+=e.amount,s+=e.amount*e.price})),this.cartItems.innerText=t,this.cartTotal.innerText=parseFloat(s.toFixed(2))};addItemToCart=e=>{const t=document.createElement("div");t.classList.add("cart-item"),t.innerHTML=`\n        <img src=${e.image} alt="cart item img"/>\n        <div>\n            <h4>${e.title}</h4>\n            <h4>${e.price}</h4>\n            <span class="remove-item">\n                <i class="fas fa-trash" data-id=${e.id}></i>\n            </span>\n        </div>\n        <div>\n            <i class="fas fa-chevron-up" data-id=${e.id}></i>\n            <p class="item-amount">${e.amount}</p>\n            <i class="fas fa-chevron-down" data-id=${e.id}></i>\n        </div>\n        `,this.cartContent.appendChild(t)};showCart=()=>{this.cartOverlay.classList.add("transparentBcg"),this.cartItself.classList.add("showCart")};cartSetup=()=>{this.cartItemsArr=Storage.getCart(),this.setCartValues(this.cartItemsArr),this.populateCart(this.cartItemsArr),this.openCartBtn.addEventListener("click",this.showCart),this.closeCartBtn.addEventListener("click",this.hideCart)};populateCart=e=>{e.forEach((e=>this.addItemToCart(e)))};hideCart=()=>{this.cartOverlay.classList.remove("transparentBcg"),this.cartItself.classList.remove("showCart")};cartFunctionality=()=>{this.cartContent.addEventListener("click",(e=>{if(e.target.classList.contains("fa-trash")){let t=e.target,s=t.dataset.id;this.cartContent.removeChild(t.parentElement.parentElement.parentElement),this.removeItemFromCart(s)}else if(e.target.classList.contains("fa-chevron-up")){let t=e.target,s=t.dataset.id,r=this.cartItemsArr.find((e=>e.id===s));r.amount=r.amount+1,Storage.setCart(this.cartItemsArr),this.setCartValues(this.cartItemsArr),t.nextElementSibling.innerText=r.amount}else if(e.target.classList.contains("fa-chevron-down")){let t=e.target,s=t.dataset.id,r=this.cartItemsArr.find((e=>e.id===s));r.amount=r.amount-1,r.amount>0?(Storage.setCart(this.cartItemsArr),this.setCartValues(this.cartItemsArr),t.previousElementSibling.innerText=r.amount):(this.cartContent.removeChild(t.parentElement.parentElement),this.removeItemFromCart(s))}})),this.clearCartBtn.addEventListener("click",(()=>{this.clearCart()}))};removeItemFromCart=e=>{this.cartItemsArr=this.cartItemsArr.filter((t=>t.id!==e)),Storage.setCart(this.cartItemsArr),this.setCartValues(this.cartItemsArr);let t=this.getItemsBtn(e);t.disabled=!1,t.style="cursor",t.innerHTML='<i class="fas fa-shopping-cart"></i>add to cart'};getItemsBtn=e=>this.bagBtnsArr.find((t=>t.dataset.id===e));clearCart=()=>{for(this.cartItemsArr.map((e=>e.id)).forEach((e=>this.removeItemFromCart(e)));this.cartContent.children.length>0;)this.cartContent.removeChild(this.cartContent.children[0]);this.hideCart()}}class Storage{static setProducts=e=>{void 0!==typeof Storage?localStorage.setItem("products",JSON.stringify(e)):alert("Error! Local storage is disabled")};static getProduct=e=>{if(void 0!==typeof Storage){return JSON.parse(localStorage.getItem("products")).find((t=>t.id===e))}alert(storErr)};static setCart=e=>{localStorage.setItem("cartItemsArr",JSON.stringify(e))};static getCart=()=>{if(void 0!==typeof Storage)return localStorage.getItem("cartItemsArr")?JSON.parse(localStorage.getItem("cartItemsArr")):[];alert(storErr)}}function loadStory(e,t){document.querySelector("#story-title").innerHTML=t,document.querySelector("#keyword").value="",document.querySelector("#search-result").innerHTML="";let s="";const r="stories/"+e,n=new XMLHttpRequest;n.open("GET",r,!0),n.send(),n.onreadystatechange=function(){if(4!=n.readyState&&200!=n.status&&alert(`Error ${n.status}: ${n.statusText}`),4==n.readyState&&200==n.status){s=n.responseText,getDocStats(s),s=s.replace(/(?:\r\n|\r|\n)/g,"<br>"),document.querySelector("#file-content").innerHTML=s;document.querySelector("#file-content").scrollTop=0}}}function getDocStats(e){const t=e.toLowerCase();let s=t.match(/\b\S+\b/g),r={},n=[];n=filterStopWords(s);for(let e in n){let t=n[e];r[t]>0?r[t]+=1:r[t]=1}const a=sortProperties(r),o=a.slice(0,6),i=a.slice(-6,a.length);liTemplate(o,document.querySelector("#most-used")),liTemplate(i,document.querySelector("#least-used"));document.querySelector("#doc-length").innerText="Document Length: "+t.length+" chars";document.querySelector("#word-count").innerText="Word Count: "+s.length+" words"}function filterStopWords(e){const t=getUnusefulWords();let s={},r=[];for(let e=0;e<t.length;e++)s[t[e].trim()]=!0;for(let t=0;t<e.length;t++){let n=e[t].trim().toLowerCase();s[n]||r.push(n)}return r}function sortProperties(e){let t=Object.entries(e);return t.sort((function(e,t){return t[1]-e[1]})),t}function liTemplate(e,t){const s=document.querySelector("#li-template").innerHTML;let r="";for(let t=0;t<e.length-1;t++)r+=s.replace("{{template}}",e[t][0]+" : "+e[t][1]+" times");t.innerHTML=r}function performMark(){const e=document.querySelector("#keyword").value,t=document.querySelector("#file-content");let s="";const r=document.getElementsByTagName("mark");for(let e=0;e<r.length;e++)r[e].outerHTML=r[e].innerHTML;const n=new RegExp(e,"gi");s=t.innerHTML.replace(n,"<mark id='mark-me'>$&</mark>"),t.innerHTML=s;const a=document.getElementsByTagName("mark").length;if(document.querySelector("#search-result").innerHTML="found "+a+" matches",a>0){document.querySelector("#mark-me").scrollIntoView}}function getUnusefulWords(){return["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your","ain't","aren't","can't","could've","couldn't","didn't","doesn't","don't","hasn't","he'd","he'll","he's","how'd","how'll","how's","i'd","i'll","i'm","i've","isn't","it's","might've","mightn't","must've","mustn't","shan't","she'd","she'll","she's","should've","shouldn't","that'll","that's","there's","they'd","they'll","they're","they've","wasn't","we'd","we'll","we're","weren't","what'd","what's","when'd","when'll","when's","where'd","where'll","where's","who'd","who'll","who's","why'd","why'll","why's","won't","would've","wouldn't","you'd","you'll","you're","you've"]}document.addEventListener("DOMContentLoaded",(()=>{const e=new Products,t=new SUI;t.cartSetup(),e.getProducts().then((e=>{t.displayProducts(e),Storage.setProducts(e)})).then((()=>{t.getBagBtns(),t.cartFunctionality()}))})),window.addEventListener("DOMContentLoaded",(()=>{let e=0,t=0;const s=[].slice.call(document.querySelector("#slider-content").children);playSlide=r=>{for(let e=0;e<s.length;e++)s[e].classList.remove("active"),s[e].classList.remove("inactive");r<0?r=e=s.length-1:r>s.length-1?r=e=0:t!=e&&s[t].classList.add("inactive"),s[r].classList.add("active"),t=e};const r=document.querySelector("#left-arrow"),n=document.querySelector("#right-arrow");r.addEventListener("click",(()=>{playSlide(e-=1)})),n.addEventListener("click",(()=>{playSlide(e+=1)})),playSlide(e)}));const subscribeForm=document.querySelector("#subscribe-form"),formTitle=document.querySelector("#form-title"),emailInput=document.querySelector("#email-input"),formPara=document.querySelector("#form-para"),btn=document.querySelector("#subscribe-btn"),subscribeBtn=document.querySelector(".subscribe-btn").addEventListener("click",(e=>{e.preventDefault(),subscribeForm.classList.add("sendEmail"),formTitle.classList.add("sendEmail"),emailInput.classList.add("sendEmail"),formPara.classList.add("sendEmail"),btn.classList.add("sendEmail"),setTimeout((()=>{subscribeForm.classList.remove("sendEmail"),formTitle.classList.remove("sendEmail"),emailInput.classList.remove("sendEmail"),formPara.classList.remove("sendEmail"),btn.classList.remove("sendEmail")}),3e3)}));window.onload=()=>{const e=document.querySelector("#content1"),t=document.querySelector("#content2"),s=document.querySelector("#content3"),r=document.querySelector("#btn1"),n=document.querySelector("#btn2"),a=document.querySelector("#btn3");openDoctors=()=>{e.style.transform="translateX(0)",t.style.transform="translateX(100%)",s.style.transform="translateX(100%)",r.style.color="#f9d423",n.style.color="#ffffff",a.style.color="#ffffff",r.style.borderBottom="4px solid #ffffff",n.style.borderBottom="3px solid #606c88",a.style.borderBottom="3px solid #606c88",e.style.transitionDelay="0.3s",t.style.transitionDelay="0s",s.style.transitionDelay="0s"},openReality=()=>{e.style.transform="translateX(100%)",t.style.transform="translateX(0)",s.style.transform="translateX(100%)",r.style.color="#ffffff",n.style.color="#f9d423",a.style.color="#ffffff",r.style.borderBottom="3px solid #606c88",n.style.borderBottom="4px solid #ffffff",a.style.borderBottom="3px solid #606c88",e.style.transitionDelay="0s",t.style.transitionDelay="0.3s",s.style.transitionDelay="0s"},openPeople=()=>{e.style.transform="translateX(100%)",t.style.transform="translateX(100%)",s.style.transform="translateX(0)",r.style.color="#ffffff",n.style.color="#ffffff",a.style.color="#f9d423",r.style.borderBottom="3px solid #606c88",n.style.borderBottom="3px solid #606c88",a.style.borderBottom="4px solid #ffffff",e.style.transitionDelay="0s",t.style.transitionDelay="0s",s.style.transitionDelay="0.3s"}};